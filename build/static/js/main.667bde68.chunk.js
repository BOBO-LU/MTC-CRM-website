(this["webpackJsonpmtc-crm"]=this["webpackJsonpmtc-crm"]||[]).push([[0],{301:function(e,t,a){},312:function(e,t,a){e.exports=a.p+"static/media/cross.03ea0c8b.svg"},325:function(e,t,a){e.exports=a(591)},330:function(e,t,a){},591:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(29),s=a.n(o),i=(a(330),a(118)),c=a(314),u=a(41),l=a(310),d=a(180),m=a(181),p=a(188),g=a(187),h=a(639),y=a(13),T=a(153),f=a(52),E=a.n(f),b=(a(570),a(571),a(299),a(300),a(311)),v=a.n(b),k=a(155),S=a(312),I=a.n(S),w=(a(301),a(189));a(600),a(594),a(593),a(636),a(635);var C=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).filterExpr=["Status","=",n.props.status],n.onAdd=n.onAdd.bind(Object(T.a)(n)),n.onReorder=n.onReorder.bind(Object(T.a)(n)),n.dataSource={store:n.props.datasource,reshapeOnPush:!0},n}return Object(m.a)(a,[{key:"onInitNewRow",value:function(e){e.data.courseId=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}(),e.data.courseType="\u81ea\u8a02",e.data.duration="20",e.data.durationType="min",e.data.capacity="20",e.data.Status=2,e.data.Customize=!0,e.data.notes="\u5982\u679c\u8981\u65b0\u589e\u8ab2\u7a0b\uff0c\u9700\u8981\u81ea\u884c\u9080\u8acb\u8b1b\u5e2b",this.props.calculateEndTime(0),console.log("*** Init: ",e.data)}},{key:"onRowInserted",value:function(e){this.props.calculateEndTime()}},{key:"onAdd",value:function(e){var t=this;console.log(e);var a=e.itemData.courseId,n={Status:e.toData,order:e.toIndex+1};this.props.datasource.update(a,n).then((function(){t.props.datasource.push([{type:"update",key:a,data:n}])})),this.checkStatus(e.toData)&&(console.log("calculateEndTime"),this.props.calculateEndTime(0))}},{key:"onReorder",value:function(e){var t=this.props.datasource._array,a=e.component.getVisibleRows(),n=t.indexOf(a[e.toIndex].data),r=t.indexOf(e.itemData);t.splice(r,1),t.splice(n,0,e.itemData),e.component.refresh()}},{key:"onDeleteClick",value:function(e){var t=this;v()("\u5df2\u6210\u529f\u522a\u9664\u8ab2\u7a0b","success");var a=e.row.data.Customize,n=e.row.data.courseId;if(!0===a)this.props.datasource.remove(n).done((function(){t.refreshDataGrid()}));else{var r={Status:1};this.props.datasource.update(n,r).then((function(){t.props.datasource.push([{type:"update",key:n,data:r}])}))}this.props.calculateEndTime(0)}},{key:"getRowIndex",value:function(e){return e.rowIndex+1}},{key:"checkStatus",value:function(e){return 2===e}},{key:"refreshDataGrid",value:function(){this.dataGrid.instance.refresh().then((function(){})).catch((function(e){}))}},{key:"render",value:function(){var e=this;return r.a.createElement(E.a,{ref:function(t){return e.dataGrid=t},dataSource:this.dataSource,height:1===this.props.status?520:566,showBorders:!0,filterValue:this.filterExpr,noDataText:"",onInitNewRow:function(t){return e.onInitNewRow(t)},onRowInserted:function(t){e.onRowInserted(t)}},r.a.createElement(f.Editing,{allowAdding:this.checkStatus(this.props.status),mode:"popup"},r.a.createElement(f.Popup,{title:"\u65b0\u589e\u81ea\u8a02\u4e3b\u984c",showTitle:!0,width:700,height:525}),r.a.createElement(f.Form,{colCount:1},r.a.createElement(k.Item,{dataField:"courseName",caption:"\u4e3b\u984c"}),r.a.createElement(k.Item,{dataField:"duration",caption:"\u6642\u9593(\u5206"}),r.a.createElement(k.Item,{dataField:"speaker",caption:"\u8b1b\u5e2b (\u9700\u8981\u81ea\u884c\u9080\u8acb\u8b1b\u5e2b)"}),r.a.createElement(k.Item,null,r.a.createElement(f.Label,{location:"top",alignment:"center",showColon:!1,text:"\u5982\u679c\u8981\u65b0\u589e\u8ab2\u7a0b\uff0c\u9700\u8981\u81ea\u884c\u9080\u8acb\u8b1b\u5e2b"})))),r.a.createElement(f.RowDragging,{allowReordering:!0,data:this.props.status,group:"tasksGroup",onReorder:this.onReorder,onAdd:this.onAdd}),r.a.createElement(f.Scrolling,{mode:"virtual"}),r.a.createElement(f.Sorting,{mode:"none"}),r.a.createElement(f.Column,{dataField:"courseId",dataType:"string",caption:"\u7de8\u865f",alignment:"center",width:45,hidingPriority:1,visible:this.checkStatus(!this.props.status)}),r.a.createElement(f.Column,{dataType:"string",caption:"\u9806\u5e8f",alignment:"center",width:45,visible:this.checkStatus(this.props.status),hidingPriority:1,cellRender:this.getRowIndex}),r.a.createElement(f.Column,{dataField:"courseName",dataType:"string",caption:this.props.displayCaption}),r.a.createElement(f.Column,{dataField:"speaker",dataType:"string",caption:"\u8b1b\u5e2b",alignment:"center",width:120,visible:!1,hidingPriority:2}),r.a.createElement(f.Column,{dataField:"duration",dataType:"number",width:70,visible:!0,caption:"\u6642\u9593(\u5206)",alignment:"center",hidingPriority:3}),r.a.createElement(f.Column,{dataField:"Status",dataType:"number",visible:!1}),r.a.createElement(f.Column,{type:"buttons",caption:"\u522a\u9664",alignment:"center",width:50,visible:this.checkStatus(this.props.status)},r.a.createElement(f.Button,{id:"removeButton",width:120,icon:I.a,cssClass:"dx-icon-custom-style",onClick:function(t){return e.onDeleteClick(t)}})))}}]),a}(r.a.Component),N=a(223),x=a.n(N),M=a(129),O=a.n(M),z=a(313),R=a.n(z),j=a(87),D=a(226),q=Object(j.a)((function(e){return{root:{margin:e.spacing(1.5),float:"right","& > *":{}}}}));function F(e){var t,a=q(),n=Object(D.b)().enqueueSnackbar;return r.a.createElement(w.a,{className:a.root,size:"large",variant:"contained",color:"primary",onClick:(t="success",function(){var a,r,o,s,i,c;null==e.startTime||""===e.engagementId||""===e.requester||""===e.location||""===e.date?(console.log("checkNUll True, something is null"),console.log(e.startTime,e.date,e.engagementId,e.requester,e.location,e.courseList),console.log("start tobackendget"),fetch("https://ebappbackend.azurewebsites.net/").then((function(e){return e.json()})).then((function(e){console.log("fetch data: ",e)})).catch(console.log("error catch by fetch in snackbar.jsx")),n("\u8acb\u8f38\u5165\u6240\u6709\u8cc7\u6599",{variant:"error"})):(console.log("checknull False, submit success"),console.log(e.startTime,e.date,e.engagementId,e.requester,e.location,e.courseList),a=e.startTime,r=e.date,o=e.engagementId,s=e.requester,i=e.location,c=e.courseList,console.log("start tobackendpost"),R.a.post("https://ebappbackend.azurewebsites.net/",{method:"post",data:{startTime:a,date:r,engagementId:o,requester:s,location:i,courselist:c}}).then((function(e){console.log("post res: ",e),console.log(e.data),console.log(e.status),console.log(e.statusText),console.log(e.headers),console.log(e.config)})),n("\u5df2\u5c07\u60a8\u7684\u521d\u7248Agenda\u9001\u7d66MTC briefing coordinator, \u5f8c\u7e8c\u6703\u5728\u8207\u60a8\u78ba\u8a8d\u6700\u7d42\u7248Agenda",{variant:t}))})},e.text)}function L(e){return r.a.createElement(D.a,{maxSnack:1},r.a.createElement(F,{text:e.text,startTime:e.startTime,date:e.date,engagementId:e.engagementId,requester:e.requester,location:e.location,courseList:e.courseList}))}var A=a(186),P=a(42),H=a(638),B=a(640),G=Object(j.a)((function(e){return{container:{display:"flex",flexWrap:"wrap"},textField:{margin:"1%",width:"13%","font-size":"3px"}}}));function W(e){var t=G(),a=Object(n.useState)(e.date),o=Object(i.a)(a,2),s=o[0],c=o[1];return r.a.createElement(P.a,{utils:A.a},r.a.createElement(H.a,{required:!0,clearable:!0,showTodayButton:!0,className:t.textField,format:"yyyy/MM/dd",margin:"normal",id:"date-picker-inline",label:e.label,value:s,onChange:function(t){c(t),e.onSelectedDate(null===t?0:t)},KeyboardButtonProps:{"aria-label":"change date"}}))}function J(e){var t=G(),a=Object(n.useState)(e.startTime),o=Object(i.a)(a,2),s=o[0],c=o[1];return r.a.createElement(P.a,{utils:A.a},r.a.createElement(B.a,{required:!0,showTodayButton:!0,ampm:!1,className:t.textField,id:"time-picker",label:e.label,value:s,onChange:function(t){c(t),console.log("datePicker: ",t),e.onSelectedTime(null===t?0:t)},KeyboardButtonProps:{"aria-label":"change time"}}))}a(74);function _(e,t){if(console.log("addMinutes() : ",e,typeof e),0===e)return console.log("dt == null"),e;var a=t.reduce((function(e,t){return 2===t.Status?e+parseInt(t.duration):e}),0);return console.log("new date: ",e.getTime()),function(e){var t="";return t=e.getMinutes()<10?"0".concat(String(e.getMinutes())):String(e.getMinutes()),String(e.getHours()).concat(":",t)}(new Date(e.getTime()+6e4*a))}var K=new x.a({store:new O.a({key:"courseId",Status:"Status",data:[{courseId:0,courseName:"MTC\u5c0e\u89bd",courseType:"\u9ad8\u7aef",duration:"30",durationType:"min",capacity:"30",speaker:"MTC Team",Status:2,Customize:!1,order:1},{courseId:1,courseName:"\u5fae\u8edf\u7684\u8f49\u578b\u4e4b\u65c5\uff1a\u5f9e\u684c\u9762\u5230\u96f2\u7aef\u7684\u9769\u547d",courseType:"\u9ad8\u7aef",duration:"30",durationType:"min",capacity:"30",speaker:"Peter Hu",Status:1,Customize:!1,order:1},{courseId:2,courseName:"\u5f9e Edge \u5230\u5168\u7403\u6578\u64da\u4e2d\u5fc3\u4f48\u7f72\uff1a\u5fae\u8edf\u7684\u96f2\u7aef\u6230\u7565",courseType:"\u9ad8\u7aef",duration:"30",durationType:"min",capacity:"10",speaker:"Peter Hu",Status:1,Customize:!1,order:1},{courseId:3,courseName:"\u5fae\u8edf\u7684 5G+IoT \u6280\u8853\u6230\u7565\u8207\u667a\u6167\u88fd\u9020",courseType:"\u9ad8\u7aef",duration:"30",durationType:"min",capacity:"10",speaker:"Peter Hu",Status:1,Customize:!1,order:1},{courseId:4,courseName:"\u4f01\u696d\u8ca1\u52d9\u6578\u4f4d\u5316\u8f49\u578b\u7684\u65c5\u7a0b\u8207\u5be6\u6230\u5fc3\u6cd5",courseType:"\u9ad8\u7aef",duration:"30",durationType:"min",capacity:"10",speaker:"Hannah Wang",Status:1,Customize:!1,order:1},{courseId:5,courseName:"\u4f01\u696d\u4eba\u8cc7\u6578\u4f4d\u5316\u8f49\u578b\u7684\u65c5\u7a0b\u8207\u5be6\u6230\u5fc3\u6cd5",courseType:"\u9ad8\u7aef",duration:"30",durationType:"min",capacity:"10",speaker:"Linda Wang",Status:1,Customize:!1,order:1},{courseId:6,courseName:"\u91d1\u878d\u696d\u6578\u4f4d\u8f49\u578b\u7684\u65c5\u7a0b\u8207\u5be6\u6230\u5fc3\u6cd5",courseType:"\u9ad8\u7aef",duration:"30",durationType:"min",capacity:"10",speaker:"Jimmy Liu",Status:1,Customize:!1,order:1},{courseId:7,courseName:"\u96f2\u7aef\u6642\u4ee3\u7684\u8cc7\u8a0a\u5b89\u5168\u67b6\u69cb\u6307\u5357",courseType:"\u6280\u8853",duration:"30",durationType:"min",capacity:"10",speaker:"White Pai",Status:1,Customize:!1,order:1},{courseId:8,courseName:"\u5fae\u8edf\u7684\u4eba\u5de5\u667a\u6167\u767c\u5c55\u85cd\u5716",courseType:"\u6280\u8853",duration:"30",durationType:"min",capacity:"10",speaker:"Ethan Huang",Status:1,Customize:!1,order:1},{courseId:9,courseName:"\u96f2\u7aef\u6642\u4ee3\u7684\u8cc7\u8a0a\u5b89\u5168\u6700\u4f73\u505a\u6cd5",courseType:"\u6280\u8853",duration:"30",durationType:"min",capacity:"10",speaker:"Jason Lin",Status:1,Customize:!1,order:1},{courseId:10,courseName:"\u5728\u96f2\u7aef\u904b\u884c SAP\uff1a\u4f86\u81ea\u5fae\u8edf\u7684\u6700\u4f73\u5be6\u8e10",courseType:"\u6280\u8853",duration:"30",durationType:"min",capacity:"10",speaker:"James Wu",Status:1,Customize:!1,order:1},{courseId:11,courseName:"\u958b\u767c\u6d41\u7a0b\u73fe\u4ee3\u5316\u8207\u96f2\u539f\u751f\u61c9\u7528\u7a0b\u5f0f\u7684\u6700\u4f73\u5be6\u8e10",courseType:"\u6280\u8853",duration:"30",durationType:"min",capacity:"10",speaker:"Huier Huang",Status:1,Customize:!1,order:1},{courseId:12,courseName:"\u5f9e\u5f59\u6574\u8cc7\u6599\u8cc7\u7522\u5230\u6539\u5584\u71df\u904b\u7684\u6d1e\u898b: \u5fae\u8edf\u96f2\u7aef\u8cc7\u6599\u670d\u52d9\u7684\u7b56\u7565\u8207\u85cd\u5716",courseType:"\u6280\u8853",duration:"30",durationType:"min",capacity:"10",speaker:"Ethan Huang",Status:1,Customize:!1,order:1},{courseId:13,courseName:"\u5fae\u8edf Azure \u96f2\u5e73\u53f0\u57fa\u790e\u5efa\u8a2d\u767c\u5c55\u85cd\u5716\u53ca\u6280\u8853\u6982\u89bd",courseType:"\u6280\u8853",duration:"30",durationType:"min",capacity:"10",speaker:"Ken Hung",Status:1,Customize:!1,order:1},{courseId:14,courseName:"\u5fae\u8edf IoT \u5e73\u53f0\u767c\u5c55\u85cd\u5716\u8207\u6700\u4f73\u505a\u6cd5\u6307\u5357",courseType:"\u6280\u8853",duration:"30",durationType:"min",capacity:"10",speaker:"Joe Lin",Status:1,Customize:!1,order:1}]})}),V=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).handleEngagementId=function(e){n.setState({engagementId:e.target.value,renderkey:Math.random()}),console.log("handel Engagement: ",n.state.engagementId)},n.handleRequester=function(e){n.setState({requester:e.target.value,renderkey:Math.random()}),console.log("handel Requester: ",n.state.requester)},n.handleLocation=function(e){n.setState({location:e.target.value,renderkey:Math.random()})},n.handleDateChange=function(e){n.setState({date:e,renderkey:Math.random()})},n.handleTimeChange=function(e){console.log("start handleTimechange: ",n.state.startTime);var t=_(e,K.store()._array);n.setState({startTime:e,endTime:t,renderkey:Math.random()}),console.log("handle: ",e,t),console.log(n.statusFilter(K.store()))},n.calculateEndTime=function(e){if(console.log("calculate: ",e),null===n.state.startTime)return 0;var t=K.store()._array.reduce((function(e,t){return 2==t.Status?e+parseInt(t.duration):e}),0);console.log("state (before): ",n.state.startTime,n.state.endTime,n.state.renderkey);var a=function(e,t){return new Date(e.getTime()+6e4*t)}(n.state.startTime,t),r="";console.log("minutes: ",a.getMinutes()),r=a.getMinutes()<10?"0".concat(String(a.getMinutes())):String(a.getMinutes());var o=String(a.getHours()).concat(":",r);n.setState({endTime:o,renderkey:Math.random()}),console.log("state (after): ",n.state.startTime,n.state.endTime,n.state.renderkey)},n.statusFilter=function(e){var t;return new x.a({store:e,filter:["Status","=",2]}).load().done((function(e){t=e})),t},n.state={renderkey:0,endTime:null,startTime:null,date:null,engagementId:"",requester:"",location:""},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("div",{className:"root"},r.a.createElement("div",null,r.a.createElement("img",{width:"200px",src:"https://images.all-free-download.com/images/graphiclarge/microsoft_technology_center_68445.jpg"})),r.a.createElement("div",{className:"textfield"},r.a.createElement(h.a,{className:t.root,id:"engagementId",label:"ENGAGEMENT ID",onChange:function(t){return e.handleEngagementId(t)}}),r.a.createElement(h.a,{className:t.root,id:"requester",label:"REQUESTER (ALIAS)",onChange:function(t){return e.handleRequester(t)}}),r.a.createElement(W,{id:"date",label:"REQUEST DATE",date:this.state.date,onSelectedDate:function(t){return e.handleDateChange(t)}}),r.a.createElement(J,{id:"startTime",label:"START TIME",startTime:this.state.startTime,onSelectedTime:function(t){return e.handleTimeChange(t)}}),r.a.createElement(h.a,{className:t.root,id:"standard-read-only-input",key:this.state.renderkey,label:"END TIME",defaultValue:this.state.endTime,InputProps:{readOnly:!0}}),r.a.createElement(h.a,{className:t.root,id:"location",label:"LOCATION",onChange:function(t){return e.handleLocation(t)}})),r.a.createElement("div",{style:{padding:"2% 1% 0","font-size":"20px"}},"MTC briefing coordinator : Vivian Lee / Karin Chuang"),r.a.createElement("div",{className:"tables"},r.a.createElement("div",{className:"column"},r.a.createElement(C,{id:1,datasource:K.store(),status:1,displayCaption:"\u4e3b\u984c"})),r.a.createElement("div",{className:"column"},r.a.createElement(C,{id:2,datasource:K.store(),status:2,displayCaption:"\u4e3b\u984c",calculateEndTime:function(t){return e.calculateEndTime(t)}}))),r.a.createElement(L,{text:"submit",startTime:this.state.startTime,engagementId:this.state.engagementId,requester:this.state.requester,location:this.state.location,date:this.state.date,courseList:this.statusFilter(K.store())}))}}]),a}(r.a.Component),U=Object(y.a)((function(e){return{root:{margin:"1%",width:"14%",fontSize:3}}}),{withTheme:!0})(V);var Q=function(){var e=Object(n.useState)(0),t=Object(i.a)(e,2),a=t[0],o=t[1];return r.a.createElement(c.a,{basename:"/mtccrm"},r.a.createElement(l.a,{progress:a,height:10,color:"red",onLoaderFinished:function(){return o(0)}}),r.a.createElement(u.a,{exact:!0,path:"/"},r.a.createElement(U,null)),r.a.createElement(u.a,{exact:!0,path:"/home"},"HOME"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[325,1,2]]]);
//# sourceMappingURL=main.667bde68.chunk.js.map